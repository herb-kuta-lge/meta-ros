From 5db352ef3cacafa84dfb9aba54b207f72797f90c Mon Sep 17 00:00:00 2001
From: Martin Jansa <martin.jansa@lge.com>
Date: Sat, 11 Jan 2020 17:08:26 -0800
Subject: [PATCH] Fix compatilibity with gpsd-3.19

* fixes:
gpsd-client/1.0.0-1-r0/git/src/client.cpp:183:22: error: 'struct gps_data_t' has no member named 'epe'
  183 |         fix.err = p->epe;
      |                      ^~~
ninja: build stopped: subcommand failed.

Signed-off-by: Martin Jansa <martin.jansa@lge.com>
---
 src/client.cpp | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/client.cpp b/src/client.cpp
index 5ae5d9e..6e61b71 100644
--- a/src/client.cpp
+++ b/src/client.cpp
@@ -180,7 +180,11 @@ namespace gpsd_client
         fix.gdop = p->gdop;
 #endif
 
+#if GPSD_API_MAJOR_VERSION >= 8
+        fix.err = p->fix.sep;
+#else
         fix.err = p->epe;
+#endif
         fix.err_vert = p->fix.epv;
         fix.err_track = p->fix.epd;
         fix.err_speed = p->fix.eps;
@@ -268,4 +272,4 @@ namespace gpsd_client
 }
 
 #include <rclcpp_components/register_node_macro.hpp>
-RCLCPP_COMPONENTS_REGISTER_NODE(gpsd_client::GPSDClientComponent)
\ No newline at end of file
+RCLCPP_COMPONENTS_REGISTER_NODE(gpsd_client::GPSDClientComponent)
